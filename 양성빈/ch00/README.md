# OT

## 스터디방식

- 진행 범위는 우선 노션에 있는 것 기준으로 시작하고, 난이도에 따라 유동적으로 관리
- 2주마다 가능하면 오프라인에서 진행 -> 1시간 발표, 1시간 질문
- Github에 공부한 내용을 작성하고 공유하는 방식 (모두가 작성)
- 각자 정리하고 그 내용에 대해 이야기해보면 좋을 것 같다.

## 오프라인 진행

- 랜덤 발표! (3명 - 하루 전날 저녁!)
- 모르는 것을 서로 질문
- 준비된 질문을 해도 된다!

# 서문

자바는 오늘 날 널리 사용하고 있는 프로그래밍 언어 중 하나다. 자바 기술 시스템은 크게 3가지로 존재한다.

> 1. 자바 프로그래밍 언어
> 2. 가상머신
> 3. 표준클래스 라이브러리

자바에 관련된 책과 자료는 매우 풍부하나 가상머신 관련된 책은 매우 부족하다.

자바가 발전해온 큰 이유 중 하나로 **자바 가상 머신**을 들 수 있다. 자바 가상머신은 다양한 하드웨어와 운영체제의 차이를 숨겨준다. 즉, 어떤 하드웨어든 상관없는 일관된 운영 플랫폼을 자바 가상 머신이 제공한다. 그래서 자바 개발자들은 메모리등의 자원관리와 하드웨어 호환성처럼 복잡한 것을 모르고 필요 문법, API, 프레임워크에 대한 학습만 한다면 일상개발에 큰 지장이 없다.

자바는 다양한 도메인에서 활용된다. 또한 해당 어플리케이션이 동접자 10명을 커버할 수 있다지만 만약 해당 어플리케이션이 인기가 있어서 수천만영의 트래픽이 몰려오면 해당 어플리키에션은 최약의 경우 비정상종료가 될 수 있다. 해당 문제를 해결하는 방법은 가장 쉬운것은 돈만 있다면 고사양 하드웨어 장비로 바꾸는 것이다. 하지만 하드웨어를 업그레이드하더라도 프로그램의 성능과 동시성이 비례해서 높아지는 일은 흔치 않을뿐더러 심지어 전혀 개선이 안 될 수 있다. 결국 가상 머신을 구성하는 다양한 기술의 동작 원리를 이해하지 못한 개발자에게 가상 머신의 운영방식과 최적화 기술을 고려한 코드를 작성하라는 것은 어불성설이다.

실무에서 요구되는 성능과 안정성을 충족시키기 위해 다양한 최적화 매개변수와 조율수단을 제공한다. 이는 거대한 상용서비스를 만들때 반드시 필요하다.

## 누가 읽으면 좋을까?

서적에서는 자바 중급 상급 개발자, 시스템 최적화 전문가, 아키텍트가 읽으면 좋다지만 나는 아직 주니어이고 관심이 매우 높기에 더욱 성장하고 싶기에 정독을 해보려고 한다.

## 효과적으로 읽으려면

해당 챕터는 크게 5개로 나눠졌는데 가장 마음이 드는 것부터 읽어도 무방하다. 하지만 읽을때 독자는 기본적으로 어느정도의 기술적 기초는 있다 가정했다고 한다. 또한 특정 제품군에 대한 설명은 자제했지만 open jdk와 oracle jdk 점유율이 절대적이라 어쩔수 없이 핫스팟 가상 머신을 주로 다룬다.

### 이 책의 구성

원서 2판은 JDK7이전에 나왔지만 지금은 LTS 버전 21까지 나왔을 정도로 자바 기술 시스템 전체가 썬 시대의 느린 버전 업그레이드 프로세스에 탈피하였다. 해당 서적은 피드백을 반영하여 오류 수정 및 가독성을 높이는 작업과 더불어 최신 기술을 반영

#### 1부 자바와 친해지기

해당 장은 다른 장들을 위한 기초 역할이다. 이 장에서는 자바기술 역사와 해당 동향 및 직접 JDK를 컴파일하는 방법이 소개되어 있다.

#### 2부 자동 메모리 관리

자바 개발자들은 메모리 관리를 JVM에 위임한다. 하지만 메모리 누수나 오버플로우가 발생하면 문제해결에 어려움울 겪기도 한다. 그래서 JVM의 메모리 관리 메커니즘을 이해하는 일은 여전히 중요하다.

2장에서는 JVM이 메모리를 어떻게 분할하는지 어떤 영역에 어떤 코드가 오버플로우를 일으키는지 설명 및 영역별 메모리 오버플로우 예외의 주된 원인을 알 수 있다. 또한 JDK가 버전이 업그레이드 되면서 비교적 안정되게 런타임 데이터 영역은 발전했지만 큰 변화는 JDK8에서 영구세대가 없어지고 메타스페이스가 등장하였다.

3장에서는 핫스팟 가상 머신이 활용하고 있는 다양한 가비지 컬렉션 알고리즘과 가비지 컬렉터의 기능 및 동작 원리를 설명한다. 또한 G1 컬렉터, 저지연 동시 컬렉터인 ZCC와 셰넌도어의 원리에도 많은 지연을 할애했다. 또한 가비지 컬렉터 인터페이스와 앱실론 컬렉터 내용도 설명 + 세대간 참조를 해결하기 위한 기억 집합과 카드 테이블, 동시 스캔도중 객체 사라짐 문제를 해결하기 위한 증분 업데이트와 초기 스냅샷, 메모리 장벽등 핫스팟이 가비지 컬렉터를 구현하는 핵심기술 설명

4장에서는 JDK에 포함된 기본적인 명령 줄 도구와 문제 해결용 시각화 도구 사용법 소개 (JHSDB, JFR, JMC, JITWatch)

5장에서는 실제 문제 해결 사례를 공유

#### 3부 가상 머신 실행 서브시스템

실행 서브시스템은 가상머신에서 없어서는 안 될 핵심요소이다.

클래스 파일을 구성하는 다양한 요소의 정의, 데이터 구조, 용도를 설명하고 클래스 데이터가 실제로 어떻게 저장되고 이용되는지 확인하는 장.

해당 장은 기술 메뉴얼 형태로 작성. 클래스 파일 형식은 어렵지만 어쩔수 없이 고수가 되기 위해서 거쳐야 하는 부분.

7장에서는 클래스 로딩의 5단계인 '읽기', '검증', '준비', '해석', '초기화' 각각에서 가상머신이 수행하는 일을 설명. 클래스 로더의 동작원리와 가상머신에서 지니는 의미 설명하는 장

JDK9때 도입된 자바 모듈 시스템은 클래스 로딩 방식에도 큰 변화를 몰고 왔다.

8장에서는 코드를 실행할 때 가상 머신이 올바른 메서드를 찾는 방법, 메서드 본문의 바이트코드를 실행하는 방법 설명 및 실행관련 메모리 구조 분석

9장에서는 클래스 로더와 실행 서브 시스템을 실무에서 활용하는 사례 설명

#### 4부 컴파일과 최적화

10장은 제네릭, 오토박싱/언박싱, 조건부 컴파일등 자바가 제공하는 편의문법을 왜 제공하는지 또한 해당 결과를 분석. 프로그램이 명명규칙을 제대로 지키고 있는지 확인하는 플러그인 애너테이션 처리기를 직접 제작 실습

11장에서는 코드에서 핫스팟을 검출하는 방법, 핫스팟 가상머신의 JIT 컴파일러, 컴파일 촉발 조건, 가상 머신 외부에서 JIT 컴파일러의 동작을 관찰하고 결과를 분석 + 컴파일타임 최적화 기법

#### 5부 효율적인 동시성

12장에서는 자바 메모리 모델의 구조와 동작 방식, 자바 메모리 모델의 원자성, 가시성, 실행 순서, 선 발생 원칙에 대해 알아본다. 또한 자바에서 스레드가 어떻게 구현되어 있는지와 가상스레드에 대해 살펴본다.

13장에서는 스레드 안전성의 개념과 분류, 가상 머신이 동기화를 구현하는 동작원칙을 설명한다.
